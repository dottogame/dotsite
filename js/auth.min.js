function signin(){rest("post","/api/auth",{email:document.getElementById("semail").value,pass:document.getElementById("spassword").value},function(e){"ok"==e.s?(Cookies.set("nick",e.nick),Cookies.set("atoken",e.access_token),window.location="./index.html"):alert("failed! Err: "+e.c)})}function register(){rest("post","/api/user",{email:document.getElementById("remail").value,nick:document.getElementById("rnick").value,pass:document.getElementById("rpassword").value},function(){alert("ok"==res.s?"Success! Please check your email and confirm!":"failed! Err: "+res.c)})}function rest(e,n,t,o){var s=new XMLHttpRequest;s.open(e,location.origin+n,!0),s.setRequestHeader("Content-Type","application/json; charset=UTF-8"),s.send(JSON.stringify(t)),s.onloadend=function(){o(JSON.parse(s.responseText))}}window.onload=function(){"/auth.html"!==window.location.pathname&&void 0==Cookies.get("atoken")&&(window.location="./auth.html")};
